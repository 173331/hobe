-- TEST LOAD RECORDINGS
-- Copy paste ke executor, jalankan setelah reload script utama

local STORAGE_FILE = "autowalk_recordings.txt"

print("=== TEST LOAD RECORDINGS ===")

-- Test 1: Cek file ada
if isfile(STORAGE_FILE) then
    print("‚úÖ File exists: " .. STORAGE_FILE)
else
    print("‚ùå File NOT found: " .. STORAGE_FILE)
    print("‚ö†Ô∏è Script belum pernah save recording, atau executor tidak persist file")
    return
end

-- Test 2: Baca file
local content = readfile(STORAGE_FILE)
print("üìÑ File size: " .. #content .. " bytes")

-- Test 3: Tampilkan isi file (100 karakter pertama)
print("üìÑ Content preview:")
print(content:sub(1, 100))

-- Test 4: Parse recordings
print("\nüìã Parsing recordings...")
local recordings = {}
local lines = string.split(content, "\n")
print("üìä Total lines: " .. #lines)

for i, line in ipairs(lines) do
    if line and #line > 0 then
        local sepPos = line:find("##")
        if sepPos then
            local name = line:sub(1, sepPos - 1)
            local dataSize = #line - sepPos - 1
            recordings[name] = true
            print("  ‚úÖ Line " .. i .. ": " .. name .. " (" .. dataSize .. " bytes)")
        else
            print("  ‚ùå Line " .. i .. ": Invalid format (no ## separator)")
        end
    end
end

-- Test 5: Summary
print("\nüìä SUMMARY:")
print("Total recordings found: " .. #lines)
local count = 0
for _ in pairs(recordings) do count = count + 1 end
print("Valid recordings: " .. count)

print("\n=== TEST COMPLETE ===")
